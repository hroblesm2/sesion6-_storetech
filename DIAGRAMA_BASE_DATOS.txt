# ğŸ—„ï¸ DIAGRAMA DE BASE DE DATOS - TIENDA TECNOLÃ“GICA GPS

## ESTRUCTURA DE TABLAS

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        USUARIOS                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ”‘ id                    INTEGER PRIMARY KEY                 â”‚
â”‚    username              TEXT UNIQUE NOT NULL                â”‚
â”‚    password              TEXT NOT NULL (HASH)                â”‚
â”‚    nombre_completo       TEXT NOT NULL                       â”‚
â”‚    email                 TEXT UNIQUE NOT NULL                â”‚
â”‚    rol                   TEXT NOT NULL ['administrador',     â”‚
â”‚                                         'asesor']            â”‚
â”‚    activo                INTEGER DEFAULT 1                   â”‚
â”‚    fecha_creacion        TIMESTAMP DEFAULT CURRENT_TIMESTAMP â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       CATEGORIAS                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ”‘ id                    INTEGER PRIMARY KEY                 â”‚
â”‚    nombre                TEXT UNIQUE NOT NULL                â”‚
â”‚    descripcion           TEXT                                â”‚
â”‚    activo                INTEGER DEFAULT 1                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        PRODUCTOS                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ”‘ id                    INTEGER PRIMARY KEY                 â”‚
â”‚    codigo                TEXT UNIQUE NOT NULL                â”‚
â”‚    nombre                TEXT NOT NULL                       â”‚
â”‚    descripcion           TEXT                                â”‚
â”‚ ğŸ”— categoria_id          INTEGER â†’ categorias(id)            â”‚
â”‚    marca                 TEXT                                â”‚
â”‚    modelo                TEXT                                â”‚
â”‚    precio                REAL NOT NULL                       â”‚
â”‚    stock                 INTEGER DEFAULT 0                   â”‚
â”‚    stock_minimo          INTEGER DEFAULT 5                   â”‚
â”‚    imagen_url            TEXT                                â”‚
â”‚    activo                INTEGER DEFAULT 1                   â”‚
â”‚    fecha_creacion        TIMESTAMP DEFAULT CURRENT_TIMESTAMP â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        CLIENTES                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ”‘ id                    INTEGER PRIMARY KEY                 â”‚
â”‚    documento             TEXT UNIQUE NOT NULL                â”‚
â”‚    tipo_documento        TEXT NOT NULL                       â”‚
â”‚    nombre                TEXT NOT NULL                       â”‚
â”‚    apellido              TEXT NOT NULL                       â”‚
â”‚    email                 TEXT                                â”‚
â”‚    telefono              TEXT                                â”‚
â”‚    direccion             TEXT                                â”‚
â”‚    fecha_registro        TIMESTAMP DEFAULT CURRENT_TIMESTAMP â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          VENTAS                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ”‘ id                    INTEGER PRIMARY KEY                 â”‚
â”‚    numero_venta          TEXT UNIQUE NOT NULL                â”‚
â”‚ ğŸ”— cliente_id            INTEGER â†’ clientes(id)              â”‚
â”‚ ğŸ”— usuario_id            INTEGER â†’ usuarios(id)              â”‚
â”‚    fecha_venta           TIMESTAMP DEFAULT CURRENT_TIMESTAMP â”‚
â”‚    subtotal              REAL NOT NULL                       â”‚
â”‚    igv                   REAL NOT NULL                       â”‚
â”‚    total                 REAL NOT NULL                       â”‚
â”‚    estado                TEXT DEFAULT 'completada'           â”‚
â”‚    metodo_pago           TEXT                                â”‚
â”‚    observaciones         TEXT                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     DETALLE_VENTAS                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ”‘ id                    INTEGER PRIMARY KEY                 â”‚
â”‚ ğŸ”— venta_id              INTEGER â†’ ventas(id)                â”‚
â”‚ ğŸ”— producto_id           INTEGER â†’ productos(id)             â”‚
â”‚    cantidad              INTEGER NOT NULL                    â”‚
â”‚    precio_unitario       REAL NOT NULL                       â”‚
â”‚    subtotal              REAL NOT NULL                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


## RELACIONES

CATEGORIAS â”€â”€1:Nâ”€â”€> PRODUCTOS
    Una categorÃ­a puede tener mÃºltiples productos
    Un producto pertenece a una categorÃ­a

USUARIOS â”€â”€1:Nâ”€â”€> VENTAS
    Un usuario puede realizar mÃºltiples ventas
    Una venta es realizada por un usuario

CLIENTES â”€â”€1:Nâ”€â”€> VENTAS
    Un cliente puede tener mÃºltiples ventas
    Una venta puede tener un cliente (opcional)

VENTAS â”€â”€1:Nâ”€â”€> DETALLE_VENTAS
    Una venta tiene mÃºltiples detalles (productos)
    Un detalle pertenece a una venta

PRODUCTOS â”€â”€1:Nâ”€â”€> DETALLE_VENTAS
    Un producto puede estar en mÃºltiples detalles de venta
    Un detalle de venta referencia a un producto


## ÃNDICES AUTOMÃTICOS

Por claves primarias:
- usuarios(id)
- categorias(id)
- productos(id)
- clientes(id)
- ventas(id)
- detalle_ventas(id)

Por campos UNIQUE:
- usuarios(username)
- usuarios(email)
- categorias(nombre)
- productos(codigo)
- clientes(documento)
- ventas(numero_venta)


## DATOS INICIALES

USUARIOS:
â”œâ”€ admin (Administrador) - admin123
â””â”€ asesor (Asesor) - asesor123

CATEGORÃAS:
â”œâ”€ Laptops
â”œâ”€ Smartphones
â”œâ”€ Tablets
â”œâ”€ Accesorios
â”œâ”€ Componentes
â”œâ”€ Audio
â””â”€ Gaming

PRODUCTOS (8 productos de ejemplo):
â”œâ”€ LAP001 - Laptop HP Pavilion 15 (S/ 2,499.00)
â”œâ”€ LAP002 - Laptop Lenovo IdeaPad (S/ 2,799.00)
â”œâ”€ CEL001 - iPhone 15 Pro (S/ 5,499.00)
â”œâ”€ CEL002 - Samsung Galaxy S24 (S/ 4,299.00)
â”œâ”€ TAB001 - iPad Air (S/ 3,499.00)
â”œâ”€ ACC001 - Mouse Logitech MX Master (S/ 349.00)
â”œâ”€ ACC002 - Teclado MecÃ¡nico RGB (S/ 599.00)
â””â”€ AUD001 - AudÃ­fonos Sony WH-1000XM5 (S/ 1,299.00)


## REGLAS DE NEGOCIO IMPLEMENTADAS

âœ“ Las contraseÃ±as se almacenan hasheadas (nunca en texto plano)
âœ“ Los roles son: 'administrador' o 'asesor'
âœ“ El stock se actualiza automÃ¡ticamente al realizar ventas
âœ“ El IGV se calcula automÃ¡ticamente (18%)
âœ“ Los nÃºmeros de venta son Ãºnicos y auto-generados
âœ“ Los productos pueden tener stock mÃ­nimo para alertas
âœ“ Las ventas pueden ser con o sin cliente registrado
âœ“ Los precios se manejan con 2 decimales

## SEGURIDAD

âœ“ SQL Injection: PrevenciÃ³n mediante parÃ¡metros preparados
âœ“ Passwords: Hash con Werkzeug (bcrypt)
âœ“ Sesiones: Manejo seguro con Flask sessions
âœ“ ValidaciÃ³n de roles: Decoradores @login_required y @admin_required
âœ“ Datos sensibles: Nunca expuestos en logs o respuestas